---
import Layout from "../layouts/Layout.astro";
import { getAllProperties } from "../lib/notionData";

// Get properties with virtual tours
const properties = await getAllProperties();
const propertiesWithTours = properties.filter(p =>
  p.virtualTour.enabled && p.virtualTour.scenes.length > 0
);

// If we have properties with tours, redirect to the first one
if (propertiesWithTours.length > 0) {
  return Astro.redirect(`/tour/${propertiesWithTours[0].slug}`);
}
---

<Layout title="360 Virtual Tour">
  <div class="relative w-full h-screen flex items-center justify-center bg-gray-900">
    <div class="text-center text-white">
      <h1 class="text-4xl font-bold mb-4">No hay tours virtuales disponibles</h1>
      <p class="text-xl mb-8">Actualmente no tenemos tours virtuales configurados.</p>
      <a 
        href="/" 
        class="bg-white text-black px-8 py-3 rounded-full hover:bg-gray-100 transition-colors duration-300 font-medium"
      >
        Volver al inicio
      </a>
    </div>
  </div>

</Layout>
